<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!-- 利用thymeleaf的fragment机制加载head -->
<!-- 其中head(title)为函数, title为当前页面的的标题 -->
<!-- th:insert为插入 th:replace为替换 -->
<div th:replace="~{/fragment/common-fragment :: head(首页)}"></div>
<body>
<div class="wrapper">
    <!-- Header section -->
    <div th:replace="~{/fragment/common-fragment :: header}"></div>

    <!-- Main content -->
    <section class="container">
        <!-- 推荐 -->
        <div class="movie-best" style="margin-top: 30px">
            <div class="col-sm-10 col-sm-offset-1 movie-best__rating">
                今日最佳影片
            </div>
            <div class="col-sm-12 change--col">
                <!-- 一项 -->
<!--                <div th:with="var m =${bestMovie.get(0)}">-->
                <div class="movie-beta__item " th:with="m0=${bestMovie.get(0)}">
                    <!-- 海报 -->
                    <img alt="" th:src="${m0.poster}"/>
                    <!-- 评分 -->
                    <span class="best-rate" th:text="${#numbers.formatDecimal(m0.score,1,1)}">5.0</span>

                    <ul class="movie-beta__info">
                        <li><span class="best-voted"th:text="${m0.num}"></span><span>为此影片评分</span></li>
                        <li>
                            <p th:text="${m0.name}"></p>
                            <p class="movie__time"><span th:text="${m0.duration}"></span>min</p>
                            <p><span th:each="c:${m0.categories}">
                                <a th:text="${c.name}"></a>
                            </span></p>
<!--                            <p> 评论</p>-->
                        </li>
                        <li class="last-block">
                            <a th:href="|/movies/${m0.id}|" class="slide__link">更多</a>
                        </li>
                    </ul>
                </div>
<!--                </div>-->
                <!-- 一项结束 -->
                <div class="movie-beta__item second--item" th:with="m1=${bestMovie.get(1)}">
                    <img alt="" th:src="${m1.poster}" style="width:190px; height:271px;" />
                    <span class="best-rate" th:text="${#numbers.formatDecimal(m1.score,1,1)}">5.0</span>

                    <ul class="movie-beta__info">
                        <li><span class="best-voted" th:text="${m1.num}"></span><span>人为此影片评分</span></li>
                        <li>
                            <p th:text="${m1.name}"></p>
                            <p class="movie__time"><span th:text="${m1.duration}"></span> min</p>
                            <p><span th:each="c:${m1.categories}"><a th:text="${c.name}"></a></span></p>
<!--                            <p>38 comments</p>-->
                        </li>
                        <li class="last-block">
                            <a th:href="|/movies/${m1.id}|" class="slide__link">more</a>
                        </li>
                    </ul>
                </div>
                <div class="movie-beta__item third--item" th:with="m2=${bestMovie.get(2)}">
                    <img alt="" th:src="${m2.poster}" style="width:190px; height:271px;" />
                    <span class="best-rate" th:text="${#numbers.formatDecimal(m2.score,1,1)}">5.0</span>

                    <ul class="movie-beta__info">
                        <li><span class="best-voted" th:text="${m2.num}"></span><span>人为此影片评分</span></li>
                        <li>
                            <p th:text="${m2.name}"></p>
                            <p class="movie__time"><span th:text="${m2.duration}"></span>min</p>
                            <p><span th:each="c:${m2.categories}"><a th:text="${c.name}"></a></span></p>
<!--                            <p>38 comments</p>-->
                        </li>
                        <li class="last-block">
                            <a th:href="|/movies/${m2.id}|" class="slide__link">more</a>
                        </li>
                    </ul>
                </div>
                <div class="movie-beta__item hidden-xs" th:with="m3=${bestMovie.get(3)}">
                    <img alt="" th:src="${m3.poster}" style="width:190px; height:271px;" />
                    <span class="best-rate" th:text="${#numbers.formatDecimal(m3.score,1,1)}">5.0</span>

                    <ul class="movie-beta__info">
                        <li><span class="best-voted" th:text="${m3.num}"></span><span>人为此影片评分</span></li>
                        <li>
                            <p th:text="${m3.name}"></p>
                            <p class="movie__time"><span th:text="${m3.duration}"></span>min</p>
                            <p><span th:each="c:${m3.categories}"><a th:text="${c.name}"></a></span></p>
<!--                            <p>38 comments</p>-->
                        </li>
                        <li class="last-block">
                            <a th:href="|/movies/${m3.id}|" class="slide__link">more</a>
                        </li>
                    </ul>
                </div>
                <div class="movie-beta__item hidden-xs hidden-sm" th:with="m4=${bestMovie.get(4)}">
                    <img alt="" th:src="${m4.poster}" style="width:190px; height:271px;"  />
                    <span class="best-rate" th:text="${#numbers.formatDecimal(m4.score,1,1)}">5.0</span>
                    <ul class="movie-beta__info">
                        <li><span class="best-voted" th:text="${m4.num}"></span><span>人为此影片评分</span></li>
                        <li>
                            <p th:text="${m4.name}"></p>
                            <p class="movie__time"><span th:text="${m4.duration}"></span>min</p>
                            <p><span th:each="c:${m4.categories}"><a th:text="${c.name}"></a></span></p>
<!--                            <p>38 comments</p>-->
                        </li>
                        <li class="last-block">
                            <a th:href="|/movies/${m4.id}|" class="slide__link">more</a>
                        </li>
                    </ul>
                </div>
                <div class="movie-beta__item hidden-xs hidden-sm" th:with="m5=${bestMovie.get(5)}">
                    <img alt="" th:src="${m5.poster}"  style="width:190px; height:271px;" />
                    <span class="best-rate" th:text="${#numbers.formatDecimal(m5.score,1,1)}">5.0</span>

                    <ul class="movie-beta__info">
                        <li><span class="best-voted" th:text="${m5.num}"></span><span>人为此影片评分</span></li>
                        <li>
                            <p th:text="${m5.name}"></p>
                            <p class="movie__time"><span th:text="${m5.duration}"></span>min</p>
                            <p><span th:each="c:${m5.categories}"><a th:text="${c.name}"></a></span></p>
<!--                            <p>38 comments</p>-->
                        </li>
                        <li class="last-block">
                            <a th:href="|/movies/${m5.id}|" class="slide__link">more</a>
                        </li>
                    </ul>
                </div>
            </div>
<!--            </div>-->
        </div>
        <!-- 间隔 -->
        <div class="clearfix"></div>
        <h2 id="target" class="page-heading heading--outcontainer">正在热映</h2>


        <!-- 热映 -->
        <div class="col-sm-12">
            <div class="row">
                <div class="col-sm-8 col-md-9" >
                    <div th:each="m:${released}">
                    <!-- Movie variant with time -->
                    <div class="movie movie--test movie--test--dark movie--test--left" th:if="${m.no % 4 == 1}">
                        <div class="movie__images">
                            <a th:href="|/movies/${m.id}|" class="movie-beta__link">
                                <img th:alt="${m.name}"  th:src="${m.poster}" style="width:440px;height:330px;"/>
                            </a>
                        </div>

                        <div class="movie__info">
                            <a th:href="|/movies/${m.id}|" class="movie__title" th:text="|${m.name}(${m.releaseDate.getYear()+1900})|"
                            >
                            </a>

                            <p class="movie__time" th:text="${m.duration}+'min'"></p>

                            <p class="movie__option">
                                <span th:each="c:${m.categories}">
                                    <a th:text="${c.name}" th:href="'/movies?category='+${c.id}" ></a>
                                </span>
                            </p>
                            <p class="movie__option" th:text="'导演:'+${m.directors}"></p>
                            <p class="movie__option" th:text="'演员:'+${m.actors}"></p>
                            <p class="movie__option" th:text="'制片国家/地区:'+${m.country}"></p>

                            <div class="movie__rate" style="margin-top: 300px">
                                <div class="score" th:id="|score${m.id}|"></div>
                                <span class="movie__rating" th:text="${#numbers.formatDecimal(m.score,1,1)}"></span>
                            </div>
                        </div>
                    </div>
                    <!-- Movie variant with time -->

                    <!-- Movie variant with time -->
                    <div class="movie movie--test movie--test--light movie--test--left" th:if="${m.no % 4 == 2}">
                        <div class="movie__images">
                            <a th:href="|/movies/${m.id}|" class="movie-beta__link">
                                <img th:alt="${m.name}"  th:src="${m.poster}" style="width:440px;height:330px;"/>
                            </a>
                        </div>

                        <div class="movie__info">
                            <a th:href="|/movies/${m.id}|" class="movie__title" th:text="|${m.name}(${m.releaseDate.getYear()+1900})|"
                            >
                            </a>

                            <p class="movie__time" th:text="${m.duration}+'min'"></p>

                            <p class="movie__option">
                                <span th:each="c:${m.categories}">
                                    <a th:text="${c.name}" th:href="'/movies?category='+${c.id}" ></a>
                                </span>
                            </p>
                            <p class="movie__option" th:text="'导演:'+${m.directors}"></p>
                            <p class="movie__option" th:text="'演员:'+${m.actors}"></p>
                            <p class="movie__option" th:text="'制片国家/地区:'+${m.country}"></p>

                            <div class="movie__rate" style="margin-top: 300px">
                                <div class="score" th:id="|score${m.id}|"></div>
                                <span class="movie__rating" th:text="${#numbers.formatDecimal(m.score,1,1)}"></span>
                            </div>
                        </div>
                    </div>
                    <!-- Movie variant with time -->

                    <!-- Movie variant with time -->
                    <div class="movie movie--test movie--test--light movie--test--right" th:if="${m.no % 4 ==3}">
                        <div class="movie__images">
                            <a th:href="|/movies/${m.id}|" class="movie-beta__link">
                                <img th:alt="${m.name}"  th:src="${m.poster}" style="width:440px;height:330px;"/>
                            </a>
                        </div>

                        <div class="movie__info">
                            <a th:href="|/movies/${m.id}|" class="movie__title" th:text="|${m.name}(${m.releaseDate.getYear()+1900})|"
                            >
                            </a>

                            <p class="movie__time" th:text="${m.duration}+'min'"></p>

                            <p class="movie__option">
                                <span th:each="c:${m.categories}">
                                    <a th:text="${c.name}" th:href="'/movies?category='+${c.id}" ></a>
                                </span>
                            </p>
                            <p class="movie__option" th:text="'导演:'+${m.directors}"></p>
                            <p class="movie__option" th:text="'演员:'+${m.actors}"></p>
                            <p class="movie__option" th:text="'制片国家/地区:'+${m.country}"></p>

                            <div class="movie__rate" style="margin-top: 300px">
                                <div class="score" th:id="|score${m.id}|"></div>
                                <span class="movie__rating" th:text="${#numbers.formatDecimal(m.score,1,1)}"></span>
                            </div>
                        </div>

                    </div>
                    <!-- Movie variant with time -->

                    <!-- Movie variant with time -->
                    <div class="movie movie--test movie--test--dark movie--test--right" th:if="${m.no % 4== 0}">
                        <div class="movie__images">
                            <a th:href="|/movies/${m.id}|" class="movie-beta__link">
                                <img th:alt="${m.name}"  th:src="${m.poster}" style="width:440px;height:330px;"/>
                            </a>
                        </div>

                        <div class="movie__info">
                            <a th:href="|/movies/${m.id}|" class="movie__title" th:text="|${m.name}(${m.releaseDate.getYear()+1900})|"
                            >
                            </a>

                            <p class="movie__time" th:text="${m.duration}+'min'"></p>

                            <p class="movie__option">
                                <span th:each="c:${m.categories}">
                                    <a th:text="${c.name}" th:href="'/movies?category='+${c.id}" ></a>
                                </span>
                            </p>
                            <p class="movie__option" th:text="'导演:'+${m.directors}"></p>
                            <p class="movie__option" th:text="'演员:'+${m.actors}"></p>
                            <p class="movie__option" th:text="'制片国家/地区:'+${m.country}"></p>

                            <div class="movie__rate" style="margin-top: 300px">
                                <div class="score" th:id="|score${m.id}|"></div>
                                <span class="movie__rating" th:text="${#numbers.formatDecimal(m.score,1,1)}"></span>
                            </div>
                        </div>
                    </div>
                    <!-- Movie variant with time -->


                    </div>
                </div>

                <aside class="col-sm-4 col-md-3">
                    <div class="sitebar first-banner--left">
                        <div th:each="r:${ran}">
                            <div class="banner-wrap first-banner--left">
                                <img alt="banner" th:src="${released.get(r).poster}"/>
                            </div>
                        </div>

                    </div>
                </aside>
            </div>
        </div>

        <!-- 资讯 -->
        <div class="col-sm-12">
            <h2 class="page-heading">最新资讯</h2>

            <!-- start -->
            <div class="col-sm-4 similar-wrap col--remove">
                <div class="post post--preview post--preview--wide">
                    <div class="post__image">
                        <img alt="" src="http://placehold.it/270x330"/>
                    </div>
                    <p class="post__date">22 October 2013</p>
                    <a href="news.html" class="post__title">"Thor: The Dark World" - World Premiere</a>
                    <a href="news.html" class="btn read-more post--btn">了解更多</a>
                </div>
            </div>
            <!-- end -->

            <div class="col-sm-4 similar-wrap col--remove">
                <div class="post post--preview post--preview--wide">
                    <div class="post__image">
                        <img alt="" src="http://placehold.it/270x330"/>
                        <div class="social social--position social--hide">
                            <span class="social__name">Share:</span>
                            <a
                                    href="#"
                                    class="social__variant social--first fa fa-facebook"
                            ></a>
                            <a
                                    href="#"
                                    class="social__variant social--second fa fa-twitter"
                            ></a>
                            <a
                                    href="#"
                                    class="social__variant social--third fa fa-vk"
                            ></a>
                        </div>
                    </div>
                    <p class="post__date">22 October 2013</p>
                    <a href="single-page-left.html" class="post__title"
                    >30th Annual Night Of Stars Presented By The Fashion Group
                        International</a
                    >
                    <a href="single-page-left.html" class="btn read-more post--btn"
                    >read more</a
                    >
                </div>
            </div>

            <div class="col-sm-4 similar-wrap col--remove">
                <div class="post post--preview post--preview--wide">
                    <div class="post__image">
                        <img alt="" src="http://placehold.it/270x330"/>
                        <div class="social social--position social--hide">
                            <span class="social__name">Share:</span>
                            <a
                                    href="#"
                                    class="social__variant social--first fa fa-facebook"
                            ></a>
                            <a
                                    href="#"
                                    class="social__variant social--second fa fa-twitter"
                            ></a>
                            <a
                                    href="#"
                                    class="social__variant social--third fa fa-vk"
                            ></a>
                        </div>
                    </div>
                    <p class="post__date">22 October 2013</p>
                    <a href="single-page-left.html" class="post__title"
                    >Hollywood Film Awards 2013</a
                    >
                    <a href="single-page-left.html" class="btn read-more post--btn"
                    >read more</a
                    >
                </div>
            </div>
        </div>
    </section>

    <div class="clearfix"></div>

    <!-- footer -->
    <div th:replace="~{/fragment/common-fragment :: footer}"></div>
</div>

<!-- open/close -->
<div th:replace="~{/fragment/common-fragment :: pop}"></div>

<!-- JavaScript -->
<div th:replace="~{/fragment/common-fragment :: script}"></div>


<script type="text/javascript">
    $(document).ready(function () {
        init_Home();
        // init_Rates();
    });
</script>
<script th:each="m:${released}">

    $(document).ready(function () {
        "use strict";
        $('#score[[${m.id}]]').raty({
            width: 130,
            score: [[${m.score}]],
            path: '/images/rate/',
            starOff: 'star-off.svg',
            starOn: 'star-on.svg',
            readOnly:true
        });
    });

</script>
</body>
</html>
